# SFEAR
# Synthetic-Fields-for-Emerging-Active-Regions

Below is the procedure described to generate synthetic flow-field and magnetic-field for emerging active regions.

Inspired by the flow model in [Birch, A.C. et al, 2019](https://ui.adsabs.harvard.edu/abs/2019A%26A...628A..37B/abstract), realistic active region inflows and vorticity are created by using features from horizontal divergence flow maps obtained using any procedure (LCT / seismology).

# **Procedure**-
The idea is to gather multiple quiet Sun images and use features seen in them to 
1. first, assemble them at appropriate locations using Monte Carlo simulation 
2. and then, superimpose them to cancel random realizations of background noise. 

This works 100% of the time for the flows, but for magnetic fields, assembling features from different locations and pulling them to region of interest drags with them nearby strong field cluster and sometimes, sunspots. So a different procedure is followed for generating synthetic bipolar magnetic fields.

## **Flows**:

- **Identify**: features of supergranular scale (using the python package skimage 0.19.2, specifically the blob_log routine that returns the radius and center of the feature) in a quiet Sun divergence flow map.

- **Reject**: from the list those features if within their 120 Mm the smoothed , unsigned magnetic field exceeds 120 G.

- **Select**: 10 features (randomly) from the remaining list.

- **Repeat**: for N quiet Sun maps, where N can be say 50.

To simulate the east-west elongated structure of the active region inflows, the features are shifted to near the center of the map (black contours indicate the probability distribution enclosing 68% and 95% of locations to where the centers of the features are shifted using Monte-Carlo simulation) and added. That is, a single synthetic active region inflow is constructed by shifting and superimposing N* 10 supergranular inflows. 
Synthetic vorticity maps are generated similarly by identifying divergent and convergent flows, shifting and superimposing appropriately.


## **Magnetic fields**:

Models for bipolar magnetic fields are generated by simply populating a region in a band near the center of the map in retrograde (prograde) direction with positive (negative) pixels using Monte-Carlo simulation (with some tilt to account for random orientation of bipoles), selecting locations from a uniform probability distribution.
